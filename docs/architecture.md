# Архитектура и технологии

Система Piket.pro — это веб‑приложение, состоящее из фронтенда и бэкенда. Публичный лендинг доступен по домену `piket.pro`, а рабочее приложение — по `app.piket.pro`.

## Общая структура

- **Фронтенд** — React.
  - Вариант 1: чистый SPA на React с React Router. Все маршруты (`/organizations`, `/objects/123`) обслуживаются на клиенте, страница перезагружается только при логине/логауте.
  - Вариант 2: Next.js. Публичный лендинг рендерится на сервере, а внутренняя часть (`/app`) работает как SPA. Это обеспечит SEO и удобный серверный роутинг.
- **Бэкенд** — Node.js (Express.js или Nest.js).
  - Предоставляет REST API для фронтенда.
  - Отвечает за аутентификацию, управление ролями, работу с БД и файловым хранилищем.
- **База данных** — PostgreSQL.
  - Используется схема с разделением данных компаний (multi‑tenancy).
  - Основные сущности: пользователи, организации, объекты, журналы работ, акты, контакты, сотрудники, тарифы.
- **Хранилище файлов** — локально или облачный S3‑совместимый сервис (выбор зависит от хостинга).  
- **API** — REST/JSON. Каждый запрос содержит JWT‑токен для аутентификации. Документация API будет приведена в отдельном разделе.

## Клиентская часть

- Разработка на React (с TypeScript).
- Для роутинга — React Router или встроенный роутер Next.js.
- Состояние форм можно управлять с помощью React Hook Form.
- Для таблиц и дат можно использовать MUI/Ant Design или собственный дизайн‑кит.

## Серверная часть

- Express.js: простой и гибкий фреймворк, подойдет для REST‑API.
- Nest.js: более структурированный, с поддержкой декораторов, DI и модульной архитектуры. Если проект будет расти, Nest.js облегчит поддержку.
- Хэширование паролей — bcrypt.
- Роли и права доступа хранятся в БД; проверка выполняется middleware.

## Развёртывание

- Приложение разворачивается в Docker‑контейнерах: отдельные сервисы для фронтенда, бэкенда, базы данных и хранилища файлов.
- Для CI/CD можно использовать GitHub Actions: сборка, тесты, выкладка.

