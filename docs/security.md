# Безопасность

## Аутентификация и хранение токенов

- Токены хранятся **только в HttpOnly-cookies** (недоступны из JS).
- Сессия пользователя — бессрочная, с **автоматическим продлением** при активности (refresh-механизм).
- Параметры cookies: `HttpOnly`, `Secure`, `SameSite=Lax`, путь `/`.
- События, завершающие сессии:
  - Явный выход пользователя (Logout).
  - Смена пароля/сброс учётной записи (инвалидируются все refresh-токены).
  - Принудительный выход администратором организации (при необходимости).
- Защита от CSRF: `SameSite=Lax` + проверка Origin/Referer на небезопасных методах.

## Роли и права

- Каждому пользователю можно назначить одну или несколько ролей (директор, инженер, мастер, бухгалтер, заказчик).
- Права доступа зависят от роли и могут задаваться на уровне организации, объекта, раздела (чтение, редактирование, управление доступом, подписание).
- Пользователи с правом «Владелец» или «Управление доступом» могут делегировать права другим (см. диалог управления доступом).

## Безопасность данных

- Данные разных организаций изолированы (multi‑tenancy). Пользователь не может получить доступ к данным других компаний без явного приглашения.
- Соединения выполняются по HTTPS. Сайт должен иметь действующий TLS‑сертификат.
- Регулярные резервные копии базы данных и файлового хранилища.
- Логи доступа и действий пользователей хранятся не менее 180 дней.

## Конфиденциальность и персональные данные

- Система соответствует требованиям ФЗ‑152 «О персональных данных».
- Персональные данные (ФИО, контактная информация) обрабатываются только для целей работы сервиса и не передаются третьим лицам.

