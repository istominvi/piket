# Тарифные планы

Раздел «Тарифные планы» позволяет владельцам и администраторам организаций выбирать, изменять и оплачивать подписку, а также видеть ограничения текущего тарифа.

## Назначение
- Ограничить функционал организации по количеству объектов, объёму хранилища и доступным функциям.
- Управлять переходами между тарифами и продлением подписки.
- Отслеживать состояние текущей подписки и историю оплат.

## Модель подписки
- Подписка оформляется **на организацию**, а не на пользователя.
- Одновременно активен только **один тарифный план**.
- При смене владельца организации подписка продолжает действовать.
- В будущем возможно добавление отдельных платных опций (дополнительные объекты, место в хранилище и т.д.).

## Доступные тарифы
| Название | Стоимость / мес | Лимит объектов | Лимит хранилища | Доп. функции |
|----------|-----------------|----------------|-----------------|--------------|
| **СТАРТ**  | 0 ₽ (первый месяц) | 1  | 1 ГБ   | — |
| **ПЛЮС**   | 9 900 ₽          | 5  | 5 ГБ   | — |
| **ПРО**    | 18 900 ₽         | 20 | 20 ГБ  | — |
| **МАКС**   | 34 900 ₽         | 100| 100 ГБ | ИИ-помощник |
| **УЛЬТРА** | 50 000 ₽         | ∞  | ∞     | ИИ-помощник, поддержка 24/7 |

> Для годовой оплаты применяется скидка 17%. Цены и описание тарифов управляются из админки.

## Ограничения тарифов
- **Объекты** — учитываются все объекты организации, включая архивные.
- **Хранилище** — учитываются все файлы, включая вложения («Приложения»), которые хранятся в системной папке в разделе «Файлы».
- При превышении лимита по хранилищу загрузка новых файлов **блокируется**.

## Переход между тарифами
- **Повышение тарифа** — моментальное, с перерасчётом стоимости за оставшиеся дни текущего периода.
- **Понижение тарифа** — пересчёт стоимости в меньший тариф и автоматическое продление периода пропорционально разнице в цене.
- **Месяц → Год** — возможно.
- **Год → Месяц** — запрещено.
- При понижении тарифа проверяются лимиты. Если они превышены:
  - По хранилищу — загрузка новых файлов блокируется до соответствия лимиту.
  - По объектам — пользователь должен архивировать лишние объекты.

## Оплата
- Методы оплаты:
  - Онлайн через платёжный сервис.
  - По счёту (безналичный расчёт).
- Платёжный период — **месяц** или **год**.
- **Автопродление** — по умолчанию выключено, включается галочкой в интерфейсе.
- При неуспешном автопродлении подписка блокируется немедленно.
- История оплат хранит:
  - дату,
  - сумму,
  - тариф,
  - метод оплаты,
  - статус,
  - ID транзакции.

## Окончание подписки
- По завершении пробного периода или оплаченного тарифа:
  - Организация переходит в **режим чтения**.
  - Все пользователи видят уведомление.
- Предоставляется **грейс-период** 7 дней на оплату.
- Уведомления о скором окончании:
  - За 3 дня до конца — ежедневные напоминания.

## Интерфейс
- Карточки тарифов с ценой, лимитами и кнопкой выбора.
- Переключатель «Месячный / Годовой» (с отображением скидки).
- Информация о текущем тарифе и дате окончания.
- Блок смены тарифа с выбором начала действия («Сейчас» или «По окончании текущего»).
- История оплат.
