# Раздел «Производство» — Журнал работ

## Назначение
Журнал работ — это основной источник входных данных о выполненных строительных работах.  
Записи из журнала используются для:
- формирования исполнительной документации;
- построения актов, отчётов и аналитики;
- хранения истории выполнения работ на объекте.

## Структура раздела
Раздел «Производство» состоит из нескольких вкладок, основная из которых — **Журнал работ**.  
Вкладка отображает список всех зарегистрированных записей о работах по выбранному объекту.

### Поля записи журнала
1. **Работа**  
   - Выбирается только из справочника «Реестр работ».  
   - Ввод вручную в обход справочника запрещён.
2. **Дата и время выполнения**  
   - Указываются вручную; по умолчанию дата — текущая, время — с шагом +10 минут от предыдущей записи.
3. **Погодные условия**  
   - Получаются автоматически из сервиса *Яндекс.Погода* на основе координат объекта.
   - Можно изменить вручную.
4. **Участки выполнения**  
   - Может быть несколько участков в одной записи.  
   - Каждый участок имеет: наименование, адрес (ПК/КМ), сторону (слева/справа/ось) и объём работ.
5. **Сумма объёма работ**  
   - Рассчитывается автоматически как сумма объёмов всех участков в записи.
6. **Тип работ**  
   - Ответственная, Скрытая, Оба.

## Права доступа
- Права наследуются от раздела «Производство» и выше — от объекта и организации.
- Допускается выдача отдельных прав на «Журнал работ».
- Пользователь с правом **Редактор** может добавлять, изменять и удалять записи.
- Пользователь с правом **Чтение** может только просматривать.
- История изменений хранится для каждой записи.

## Архив
- Записи могут быть перемещены в архив.
- Архив позволяет восстановить запись в течение установленного периода.
- Удаление из архива — безвозвратное.

## Сортировка
Доступные параметры сортировки:
1. По наименованию работы.
2. По типу.
3. По дате.
4. По начальному адресу.
5. По конечному адресу.
6. По объёму.

## Фильтры
- Применяются параметры фильтрации даже без сохранения фильтра.
- Если ни один сохранённый фильтр не выбран, применяются параметры текущего окна фильтра.
- При выборе хотя бы одного сохранённого фильтра применяются только выбранные.
- Кнопка **Добавить** сохраняет фильтр каждый раз, даже при одинаковых параметрах (добавляется постфикс к названию).
- Для удаления фильтров необходимо выделить один или несколько и нажать **Удалить**.
- Для изменения сохранённого фильтра нужно его выделить, внести изменения и сохранить.

## Дополнительно
- Импорта данных из внешних файлов (Excel/CSV) не предусмотрено.
- Все записи имеют привязку к адресу (ПК или КМ) — создание записи без привязки невозможно.
