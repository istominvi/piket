# Спецификация формы регистрации пользователя

![Экран регистрации](../images/registration.jpg)

## Назначение экрана

Экран регистрации предназначен для создания нового аккаунта в системе Piket.pro. Пользователь заполняет набор полей для идентификации, устанавливает пароль и подтверждает согласие с политикой конфиденциальности и офертой.

## Поля и правила валидации

| Поле           | Тип данных | Обязательность | Ограничения и проверки                                                                                                     |
|---------------|-----------|---------------|-----------------------------------------------------------------------------------------------------------------------------|
| **Имя пользователя** | Строка     | Да            | 3–30 символов; допускаются латиница, цифры и подчёркивания; проверяется на уникальность.                                    |
| **Электронная почта** | E‑mail     | Да            | Должна соответствовать формату `имя@домен.tld`; проверяется на уникальность.                                                |
| **Телефон**    | Телефон    | Да            | По умолчанию формат +7 (Россия), доступен выбор региона в выпадающем списке; маска ввода `+7 (___) ___‑__‑__`; проверяется валидатором `libphonenumber-js` на допустимость номера. |
| **Пароль**     | Пароль     | Да            | 8–32 символов; должен содержать минимум одну заглавную, одну строчную букву, одну цифру и один спецсимвол; рядом с полем расположена иконка для показа/скрытия пароля. |
| **Фамилия**    | Строка     | Да            | Только кириллические буквы; до 50 символов.                                                                                |
| **Имя**        | Строка     | Да            | Только кириллические буквы; до 50 символов.                                                                                |
| **Отчество**   | Строка     | Нет           | Только кириллические буквы; до 50 символов.                                                                                |
| **Согласие с политикой** | Чекбокс | Да            | Пользователь должен поставить галочку «Я принимаю условия политики конфиденциальности и оферты»; без галочки отправка формы невозможна. |

## Обработка события «Зарегистрироваться»

1. **Проверка обязательных полей.** Перед отправкой система проверяет, что все обязательные поля заполнены и проходят валидацию.
2. **Сообщения об ошибках.** При обнаружении ошибки рядом с соответствующим полем выводится сообщение: 
   - «Поле обязательно для заполнения» — если поле пустое;
   - «Недопустимый формат» — если формат поля не соответствует требованиям;
   - «Пользователь с таким именем/email уже существует» — если значение не уникально.
3. **Отправка на сервер.** При успешной валидации данные отправляются по защищённому соединению (HTTPS) на сервер. Сервер проверяет уникальность логина, email и телефона, хэширует пароль и создаёт запись о пользователе.
4. **Ответ сервера.** В случае успеха пользователь может быть автоматически авторизован или перенаправлен на страницу входа. В случае ошибки сервер возвращает описание, которое отображается пользователю.

## Навигация и интерфейсные элементы

- **Ссылка «← Назад».** Возвращает пользователя на предыдущую страницу. 
- **Ссылка «Войти →».** Открывает форму входа.
- **Индикатор надёжности пароля.** (необязательный элемент) может отображаться под полем ввода пароля и показывать степень сложности.
- **Кнопка «Зарегистрироваться».** Остаётся неактивной, пока не заполнены и не валидированы все обязательные поля. 
- **Текст согласия.** Короткая фраза «Я принимаю условия политики конфиденциальности и оферты», где слова «политики конфиденциальности» и «оферты» являются ссылками на соответствующие документы.

## Дополнительные требования

- **Доступность.** Контраст текста и фона соответствует стандарту WCAG 2.1 AA; все элементы формы доступны с клавиатуры и имеют подписи для скринридеров.
- **Адаптивность.** Форма должна корректно отображаться на мобильных устройствах и на десктопах.
- **Безопасность.** Все данные передаются только по протоколу HTTPS. Пароли хранятся в базе в виде хэш-сумм.

Эта спецификация подлежит включению в раздел «Требования» вашего ТЗ и служит основой для реализации и тестирования формы регистрации.
