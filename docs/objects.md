# Объекты

Раздел «Объекты» позволяет создавать и вести данные строительных объектов внутри выбранной организации. После выбора активного объекта в меню становятся доступны «Файлы», «Производство» и «Исполнение».

## Доступ и роли
- Права наследуются от организации (см. [Права доступа](access.md)).
- Создавать/редактировать объекты могут пользователи с правом **Редактирование** на сущность **Объекты** в рамках организации.
- Доступ на конкретный объект можно выдать отдельно через «Доступ».

## Логика работы
- Вход в раздел показывает **список объектов** организации.
- Выбор объекта (radio) делает его **активным** и сразу отображает пункты меню: **Файлы**, **Производство**, **Исполнение**.
- Активный объект **запоминается** в пределах активной организации и восстанавливается при обновлении страницы.

## Список объектов

### Колонки таблицы
| Колонка          | Описание                                                       |
|------------------|----------------------------------------------------------------|
| **Наименование** | Сокращённое + фрагмент полного наименования                    |
| **Дата ›**       | Дата начала исполнения                                         |
| **< Дата**       | Дата окончания исполнения                                      |
| **Контракт**     | Идентификатор/номер контракта                                  |
| **Сумма**        | Сумма контракта в ₽                                            |

> Состав колонок соответствует макету: по умолчанию сортировка по **дате начала** (вверх/вниз). Поиск — инкрементный по названию/контракту.

### Действия
- **Добавить** — создание объекта.
- **Удалить** — мягкое удаление (архив на 30 дней), доступно при праве *Редактирование* на объект.
- **Выбрать** — делает объект активным (radio).

## Создание и редактирование объекта

### Поля
- **Сокращённое наименование** — обязательное. Короткий код, удобный для списков.
- **Полное наименование** — обязательное. Как в официальной документации.
- **Система отсчёта** — обязательная, **неизменяемая** после сохранения. Варианты:
  - **Пикетная (ПК)**
  - **Километровая (КМ)**
- **Координаты на карте** — обязательные. Ввод адреса **или** координат.
  - Геокодер/карта: **Яндекс.Карты** (интеграция для получения координат по адресу и наоборот).
  - Используется для автоопределения погодных условий при выполнении работ.
- **Контракт** — строка (без жёсткого формата).
- **Период исполнения** — **обязательный** диапазон дат (для аналитики/прогнозов).
- **Сумма контракта** — число в рублях (форматировать с разделителями).

### Валидация
- Обязательные поля: сокращённое/полное наименование, система отсчёта, координаты, период исполнения.
- Сумма ≥ 0.
- Система отсчёта **фиксируется** при первом сохранении и далее недоступна к изменению.

## Участники контракта
- Таблица «Статус / Организация».
- **Добавить участника**:
  - Поле **Статус** (например: Заказчик, Генподрядчик, Субподрядчик и т.п.).
  - Поле **ИНН** → **поиск ФНС** → автозаполнение поля «Организация».  
    Можно откорректировать вручную.
- Можно добавить **несколько** участников с разными статусами.
- Данные участников отображаются в актах и используются в аналитике.

## Архивирование
- Удаление объекта перемещает его в **архив на 30 дней**.
- В архиве допускается просмотр/восстановление; полное удаление доступно только по истечении 30 дней.
- Архивные объекты **учитываются** в тарифных лимитах (см. [Тарифные планы](plans.md)), но **не** показываются в дереве прав и в операционном UI выбора сущностей.

## Интеграции
- **Геоданные:** Яндекс.Карты (геокодер, выбор точки).
- **ФНС:** поиск организации по ИНН для участников контракта (как в разделе «Организации»).

## Ошибки/состояния
- При попытке изменить «Систему отсчёта» после первого сохранения — блокировать и показать подсказку.
- При пустом периоде исполнения — не сохранять форму (пояснение у поля).
- При недоступности ФНС/геокодера — позволить ручной ввод, отобразив предупреждение.

